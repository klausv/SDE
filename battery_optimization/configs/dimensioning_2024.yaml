# Battery Dimensioning Analysis Configuration
# Optimizes battery size (E_nom, P_max) for Stavanger 150 kWp solar installation

mode: yearly
time_resolution: PT60M

simulation_period:
  start_date: "2024-01-01"
  end_date: "2024-12-31"

# Battery operational parameters (base values, will be varied in grid search)
battery:
  capacity_kwh: 80
  power_kw: 60
  efficiency: 0.90
  initial_soc_percent: 50.0
  min_soc_percent: 10.0
  max_soc_percent: 90.0

# Input data sources
data_sources:
  prices_file: "data/spot_prices/2024_NO2_hourly.csv"
  production_file: "data/pv_profiles/pvgis_stavanger_2024.csv"
  consumption_file: "data/consumption/commercial_70000kwh_2024.csv"

# Yearly simulation mode (365 daily optimizations, 24h horizon)
mode_specific:
  yearly:
    horizon_hours: 24  # 1 day (changed from 168h weekly)
    weeks: 365  # Daily optimizations (365 days)

# Battery dimensioning parameters
dimensioning:
  # Grid search ranges [start, stop, step]
  energy_range_kwh: [20, 201, 30]    # 20, 50, 80, ..., 200 kWh
  power_range_kw: [10, 101, 15]      # 10, 25, 40, ..., 100 kW

  # Powell refinement settings
  enable_powell_refinement: true
  powell_energy_bounds_kwh: [5, 210]
  powell_power_bounds_kw: [5, 105]
  powell_max_iterations: 50
  powell_tolerance_nok: 100

  # Economic parameters
  discount_rate: 0.05
  project_years: 15
  battery_cost_per_kwh: 5000  # NOK/kWh (current market price)

  # Analysis parameters
  year: 2024
  resolution: PT60M

# Output settings
output_dir: "results/battery_dimensioning_PT60M"
save_trajectory: false  # Save space - only save summary results
save_plots: false       # Plots generated separately after dimensioning
